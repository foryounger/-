# 链接
 * linux中的文件共享使用，可以使用链接的方式共享解决，一种是硬链接（Hard Link），另一种是软链接或者也被叫为符号链接（Symbolic Link）。

1.硬链接
   >硬链接是指通过索引节点来进行链接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都会给它分配一个编号，这个编号被称为索引节点编号号(Inode

   >Index)或者Inode，它是文件或者目录在一个文件系统中的唯一标识，文件的实际数据放置在数据区域（data block），它存储着文件重要参数信息，也就是元数据 （metadata），比如创建时间、修改时间、文件大小、属主、归属的用户组、读写权限、数据所在block号等
   
   >在Linux系统中，多个文件名指向同一索引节点(Inode)是正常且允许的。一般这种链接就称为硬链接。硬链接的作用之一是允许一个文件拥有多个有效路径名，这样用户就可以建立硬链接到重要的文件，以防止“误删”源数据(很多硬件，如netapp存储中的快照功能就应用了这个原理，增加一个快照就多了一个硬链接》。不过硬链接只能在同一文件系统中的文件之间进行链接，不能对目录进行创建。之所以文件建立了硬链接就会防止数据误删，是因为文件系统的原理是，只要文件的索引节点还有一个以上的链接（仅删除了该文件的指向），只删除其中一个链接并不影响索引节点本身和其他的链接（数据的实体并未删除），只有当最后一个链接被删除后，此时如果有新数据要存储到磁盘上，被删除的文件的数据块及目录的链接才会被释放，空间被新数据暂用覆盖。



2.软链接
  >软链接就是一个普通文件，只是数据块内容有点特殊，文件用户数据块中存放的内容是另一文件的路径名的指向，通过这个方式可以快速定位到软连接所指向的源文件实体。软链接可对文件或目录创建。

### 软连接的作用
   * 便于文件的管理，比如把一个复杂路径下的文件链接到一个简单路径下方便用户访问。
   * 节省空间解决空间不足问题，某个文件文件系统空间已经用完了，但是现在必须在该文件系统下创建一个新的目录并存储大量的文件，那么可以把另一个剩余空间较多的文件系统中的目录链接到该文件系统中。
   
  >删除软链接并不影响被指向的文件，但若被指向的原文件被删除，则相关软连接就变成了死链接。
  
  
  
  ## 1 软连接与硬链接的优缺点：
   ### 1 软连接的特点：
     1. 软链接是存放另一个文件的路径的形式存在。
     2.软链接可以 跨文件系统 ，硬链接不可以。
     3.软链接可以对一个不存在的文件名进行链接，硬链接必须要有源文件。
     4.软链接可以对目录进行链接。
     
   ### 2 硬链接的特点：
      1. 硬链接，以文件副本的形式存在。但不占用实际空间。
      2. 不允许给目录创建硬链接。
      3. 硬链接只有在同一个文件系统中才能创建。
      4. 删除其中一个硬链接文件并不影响其他有相同 inode 号的文件
      
   *不论是硬链接或软链接都不会将原本的档案复制一份，只会占用非常少量的磁碟空间。 
   
   
   ## 2 linux 中 ln 命令的使用
   ln 的命令格式：
       ln [参数] [源文件或目录] [目标文件或目录]
       参数：
        * -i 交互模式，文件存在则提示用户是否覆盖。
        * -s 软连接，创建软连接
        * -d 使用超级用户创建目录硬链接
        * -b  删除 ，覆盖之前创建的连接
        
   ### 例子：
      *   ln -s [源文件]  [目标文件] 创建软连接
      *   ln   [源文件][目标文件]   创建硬链接 
      
      
      
```
   ####注释  为/home/wang/test/gt 文件创建一个软连接和一个硬链接
   [root@ker8stest test]# ls -li
total 20
67213254 -rw-r--r--. 1 root root 123 Jan  4 04:10 20190104_typetest
67216345 -rw-r--r--. 1 root root  75 Feb 18 20:19 gt
67516775 -rw-r--r--. 1 root root  14 Feb 18 01:21 gt2
67216347 -rw-r--r--. 1 root root 455 Feb 17 22:06 passwd.gz
67216348 -rw-r--r--. 1 root root 512 Feb 17 21:46 passwd.xz
[root@ker8stest test]# 创建一个软连接
-bash: 创建一个软连接: command not found
[root@ker8stest test]# ln -s gt linkgts
[root@ker8stest test]# ls -li
total 20
67213254 -rw-r--r--. 1 root root 123 Jan  4 04:10 20190104_typetest
67216345 -rw-r--r--. 1 root root  75 Feb 18 20:19 gt
67516775 -rw-r--r--. 1 root root  14 Feb 18 01:21 gt2
67213257 lrwxrwxrwx. 1 root root   2 Feb 19 01:12 linkgts -> gt
67216347 -rw-r--r--. 1 root root 455 Feb 17 22:06 passwd.gz
67216348 -rw-r--r--. 1 root root 512 Feb 17 21:46 passwd.xz
[root@ker8stest test]# 为gt文件创建一个硬链接
-bash: 为gt文件创建一个硬链接: command not found
[root@ker8stest test]# ln gt linkgth
[root@ker8stest test]# ls -li
total 24
67213254 -rw-r--r--. 1 root root 123 Jan  4 04:10 20190104_typetest
67216345 -rw-r--r--. 2 root root  75 Feb 18 20:19 gt
67516775 -rw-r--r--. 1 root root  14 Feb 18 01:21 gt2
67216345 -rw-r--r--. 2 root root  75 Feb 18 20:19 linkgth
67213257 lrwxrwxrwx. 1 root root   2 Feb 19 01:12 linkgts -> gt
67216347 -rw-r--r--. 1 root root 455 Feb 17 22:06 passwd.gz
67216348 -rw-r--r--. 1 root root 512 Feb 17 21:46 passwd.xz

```
    
 
     
   
   
